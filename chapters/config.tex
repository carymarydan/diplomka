\label{sec:config}

Nastavení systému VuFind probíhá pøes konfiguraèní soubory. Tyto soubory podléhají konfiguraènímu standardu. Mají tedy jednotný format a jsou s pøíponou *.ini. Výchozí konfiguraèní soubory se nacházejí v koøenovém adresáøi systému VuFind ve složce \texttt{config/vufind}. V pøípadì knihovny NTK je cesta k tìmto souborùm konkrétnì takováto:
\begin{verbatim}
/var/www/vufind/config/vufind
\end{verbatim}

Pøed úpravou tìchto souboru je velmi doporuèeno vytvoøit jejich kopie v lokálním adresáøi, který reprezentuje lokální knihovnu \cite{local.conf}. Chceme-li, aby v jednom systému bìželo nìkolik oddìlených katalogù s rùznou konfigurací, vytvoøíme pro každý z nich jeden lokální adresáø. V pøípadì NTK existuje ve VuFindu jediný katalog, proto cesta do lokálního adresáøe je:
\begin{verbatim}
/var/www/vufind/local
\end{verbatim} 
Po zkopírování výchozích konfiguraèních souborù do lokálního adresáøe knihovny lze již lokální konfiguraèní soubory editovat z umístìní:
\begin{verbatim}
/var/www/vufind/local/config/vufind
\end{verbatim}

Celý seznam konfiguraèních souborù se struèným popisem, který èítá 54 položek, je dostupný v oficiální dokumentaci \cite{conf.files}. Zde je uvedeno nìkolik nejbìžnìji upravovaných souborù a u nich nejzásadnìjší nastavení systému.

\paragraph{config.ini}
Tento primární konfiguraèní soubor obsahuje mnoho globálních nastavení systému. Napøíklad se zde zapíná a vypíná automatická konfigurace uvedena v kapitole \ref{sec:instalace}. Pro produkèní provoz je tato funkce vypnuta. Stejnì tak se tu zapíná a vypíná kontrolní výpis pøi ladìní systému, tzv. debug, který je pro produkèní provoz také vypnutý, avšak velmi vhodný je pro servery testovací. Základní promìnné jako \textit{url}, \textit{email} a \textit{title} jsou zde nastaveny, aby mohly být použity ve zdrojovém kódu. Parametrem \texttt{theme} se udává jaké šablony se použijí pro grafický vzhled VuFindu. V pøípadì knihovny NTK se vychází z kopie velmi rozšíøeného standardizovaného tématu Bootstrap3, který je vysvìtlen v kapitole \ref{sec:kustomizace}. Výchozí jazyková mutace systému je rovnìž definována zde, stejnì tak se zde aktivují dostupné jazyky, do kterých mùže uživatel systém pøepnout bìhem jeho používání. V knihovnì NTK je výchozím jazykem pochopitelnì èeština a také lze systém pøepnout do anglické verze. Èasová zóna je lokalizována dle umístìní knihovny, v NTK je to tedy \uv{Europe/Prague}. Dále se zde nastavuje výchozí modul, který se naèítá pøi vstupu na domovskou stránku systému VuFind. Možnosti tohoto nastavení jsou dvì. Buï je zvolen standardní modul \texttt{Search}, který zobrazuje stránku se základním vyhledáváním a je také nastavený v NTK, nebo modul \texttt{Combined}, který se nastavuje v pøípadì, že je do VuFindu napojen další index, napøíklad Summon, a chce se uživateli nabídnout kombinované vyhledávání v obou tìchto zdrojích, tedy jak v místním katalogu, tak ve vzdálených elektronických informaèních zdrojích knihovny. Stejnì tak je modul \texttt{Search} nastaven jako výchozí modul pro zobrazení uživateli, který se do systému pøihlásí. Zapíná a vypíná se zde modul pro administrátora systému, který tak má pøístup do sekce s informacemi o indexu, statistikách vyhledávacích dotazù, mùže zde spravovat uživatelské tagy a provádìt jednoduché zmìny nastavení, které manipulují právì s tímto konfiguraèním souborem, tedy skrz webové rozhraní. Také se zde nastavuje na jaké stranì se bude zobrazovat sloupec s fasetami, v NTK je toto zobrazení na pravé stranì obrazovky. Velmi dùležitým parametrem je \texttt{driver}, tedy ovladaè, který se použije k ovládání a komunikaci s integrovaným knihovnickým systémem. Zpravidla je pojmenován stejnì jako daný knihovnický systém, v pøípadì NTK je to Aleph. V této èásti nastavení je nìkolik dalších parametrù, kterými lze ovlivnit chování komunikace VuFindu s Alephem. Napøíklad možnost rušení rezervací jednotek a prodlužování vypùjèených jednotek je v NTK povoleno. V opaèném pøípadì lze toto zakázat právì zde. Dále se zde nastavuje metoda autentizace, v prostøedí NTK jde o Shibboleth. Je zde umístìno také základní nastavení indexace, v bìžném pøípadì se jedná o indexaèní server Solr bežící na stejném serveru jako VuFind na portu 8080 a indexaèní jádro s názvem \texttt{biblio}. Stejnì jako pro indexaèní server Solr, i pro databázový server se zde definuje o jaký typ databáze se jedná a kde je umístìna. V NTK je použita databáze MySQL bìžící taktéž na stejném serveru jako VuFind. Dále jsou zde vyplnìny citlivé údaje pro pøihlášení do databáze jako je pøihlašovací jméno a heslo. V sekci \texttt{Content} se definují zdroje pro obálky knih, které se v knihovnì NTK naèítají ze serveru Aleph a zdroje rozšiøující informace o autorech, které se naèítají z Wikipedie. Dále je zde uvedena adresa linkovacího serveru SFX. Pro pøístup k elektronickým materiálùm z vnìjšího prostøedí knihovny je nastavena EZProxy, dále jsou nastaveny adresy citaèních nástrojù Refworks a EndNote. Logování, tedy záznamy o aktivitì serveru se ukládají v koøenovém adresáøi do souboru \texttt{vufind.log}, jak je zde uvedeno. Uživatelské komentáøe je zde také možné povolit èi zakázat. V NTK jsou povoleny.
\paragraph{Aleph.ini}
Jelikož integrovaným knihovnickým systémem v Národní technické knihovnì je Aleph, konfiguraèní soubor, který upøesòuje informace o tomto systému se jmenuje \texttt{Aleph.ini}. V pøípadì používání jiného ILS, napøíklad Koha, se konfiguraèní soubor pro nastavení upøesòujících informací o systému jmenuje \texttt{Koha.ini}. Je zde zadáno adresa, na které ILS Aleph bìží, konkrétnì \url{aleph.techlib.cz}. Dále se nastavuje jméno báze, které je pro toto specifické prostøedí \texttt{STK01}. Toho se používá pøi vytváøení dotazu na X-server Alephu pro získání informací o konkrétní knihovní jednotce. Definují se zde také místa vyzvednutí, kde lze po rezervaci knihovní jednotky oèekávat její výdej. V NTK to pøedstavují dvì zkratky PUJC a BHF, které znamenají \texttt{Pùjèovna} a \texttt{Badatelna historického fondu}. V uživatelském rozhraní se díky pøekladovému slovníku \texttt{Pùjèovna} zobrazuje jako \texttt{Centrální pult}, protože tak je to v NTK reálnì oznaèeno. Dále je zde obvykle uvedena cesta k umístìní souboru, který obsahuje pøevodní tabulky kódù umístìní jednotek, dílèích knihoven, statusù jednotek, atd., jež vrací na dotaz Aleph ve formátu XML spoleènì s dalšími informacemi, které nejsou v indexu VuFindu a musí se tak naèítat v reálném èase pøi prohlížení konkrétních záznamù v katalogu. V prostøedí NTK je však naèítání tohoto souboru s názvem \texttt{AlephTables.php} a umístìním ve složce \texttt{aleph\_tab} v koøenovém adresáøi øešeno jiným zpùsobem. A to tak, že se soubor naèítá pøímo z ovladaèe Alephu, kterým je:
\begin{verbatim}
/module/ntk_module/src/ntk_module/ILS/Driver/Aleph.php
\end{verbatim}
\paragraph{facets.ini}
Jak název napovídá, v tomto konfiguraèním souboru se nastavuje vše, co se týká faset. Fasety se v katalogu zobrazují na dvou místech; v pravé èásti obrazovky pøi výsledcích vyhledávání a na stránce pokroèilého vyhledávání. Do seznamu faset, které se mají zobrazit je v NTK pøidána faseta \texttt{Sbírka}, faseta \texttt{PSH} a faseta \texttt{Digitalizace}. Naopak vyøazena je faseta \texttt{Období}. Nastavena je tu také ta vlastnost faset, že jednotlivé položky faset se mohou z výsledkù vyhledávání vylouèit. V pokroèilém vyhledávání je skryta faseta \texttt{Ilustrováno}, která specifikuje, zda budou výsledky vyhledávání obsahovat ilustraci, èi nikoli. Provádí se parametrem \texttt{special\_facets}. Dále je nastaveno, že hodnoty faset mají podléhat jazykovým mutacím, tedy pøekládat se do jazykù podle nastavení uživatele.

\paragraph{searchbox.ini}
Tento konfiguraèní soubor ovlivòuje nastavení vyhledávacího pole. Tzv. kombinované vyhledávání, neboli vyhledávání v lokálním indexu katalogu a zároveò v elektronických informaèních zdrojích poskytované službou Summon, se zde aktivuje parametrem \texttt{combinedHandlers} a v NTK je využito na testovacím serveru VuFind pro tyto úèely zøízeném, viz. kapitola \ref{sec:vufind-eiz}. Vyhledávání zde lze také nastavit pro použít v kombinaci napøíklad s vyhledáváním Google.

\paragraph{combined.ini}
Tento konfiguraèní soubor je využit v pøípadì použití kombinovaného vyhledávání pro nastavení štítkù a popiskù jednotlivým indexùm. Ty specifikují uživateli o jaké báze se jedná, jestli jde napøíklad o lokální fyzický fond knihovny nebo o vzdálené elektronické informaèní zdroje.

\paragraph{searches.ini}
Globální nastavení vyhledávání je obsaženo právì v tomto konfiguraèním souboru. Základní vyhledávání je v NTK rozšíøeno o možnost vyhledávání v poli \texttt{Pøedmìtové heslo}, \texttt{Systémové èíslo} a \texttt{Stará Signatura}. Tato svazková signatura je dnes využívána už spíše jen knihovníky NTK pro vyhledávání starších knih ve skladu knihovny, které ještì nemají novì pøidìlenou LCC signaturu. Ty samé možnosti vyhledávání v polích jsou pøidány i do pokroèilého vyhledávání. Dále se zde specifikuje modul doporuèených témat, který se zobrazuje nad výsledky vyhledávání a rozšiøuje tak uživateli obzor v daném vyhledávacím tématu. Konkrétnì je nastaveno, že pøi vyhledávání podle \texttt{Pøedmìtového hesla} se nad výsledky vyhledávání zobrazuje modul obsahující index pøedmìtových hesel Polytematického strukturovaného hesláøe, který díky hierarchickému uspoøádání umožòuje uživateli specifikovat èi zobecòovat téma vyhledávání. Je zde také možnost nastavení výchozího vyhledávacího filtru, což v podstatì znamená automatickou aktivaci fasety, která je aplikována pøi každém vyhledávání. Toho je využito v testovací verzi VuFindu pro elektronické informaèní zdroje, kde z indexu Summon jsou tímto zpùsobem vylouèeny záznamy fyzického fondu NTK. V neposlední øadì se zde nastavuje nabídka øazení výsledkù. Výchozí øazení je nastaveno podle relevance, dalšími možnostmi jsou dle data vzestupnì i sestupnì, dle autor, signatury a názvu. Protože je v NTK požadováno, aby výskyt vyhledávacího výrazu byl zvýraznìn ve výsledcích vyhledávání, parametr \texttt{highlighting} je nastaven na hodnotu \texttt{true}.

\paragraph{searchspecs.yaml}
Právì relevance vyhledaných výsledkù se ovlivòuje tímto konfiguraèním souborem. V závislosti na pøedchozím nastavení je zde pøidáno vyhledávání v nových polích \texttt{Stará signatura} a \texttt{Pøedmìtové heslo}. 

